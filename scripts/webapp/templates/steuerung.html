{% extends 'base.html' %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename= 'css/steuerung.css') }}">

<h1>{% block title %} Steuerung {% endblock %}</h1>
<div class="form-group">
    <button class="btn" id="bigButton" onclick="this.blur();">Start</button>
</div>
<!--
<form method="POST">
	<label for="countdown">Start des Countdown:</label>
	<input type="text" id="countdown" name="countdown"><br><br>
	<input type="submit" value="Submit">
</form>-->

<div class="container">
    <h1>Robot Control</h1>
    <button class="btn btn-primary" id="startButton" onclick="this.blur();">Start Robot</button>
    <button class="btn btn-danger" id="stopButton" onclick="this.blur();">Stop Robot</button>
    <p>Robot Data: <span id="robotData">No data yet</span></p>
  </div>

  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script>
    document.getElementById('startButton').addEventListener('click', function() {
      fetch('/start', { method: 'POST' })
        .then(response => response.json())
        .then(data => {
          console.log(data);
          fetchData();
        });
    });
  
    document.getElementById('stopButton').addEventListener('click', function() {
      fetch('/stop', { method: 'POST' })
        .then(response => response.json())
        .then(data => {
          console.log(data);
          fetchData();
        });
    });
  
    function fetchData() {
      fetch('/data')
        .then(response => response.json())
        .then(data => {
          document.getElementById('robotData').textContent = data.data;
        });
    }
  </script>

{% endblock %}
